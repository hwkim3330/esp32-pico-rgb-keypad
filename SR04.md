
# ESP32-PICO + HC-SR04 초음파 센서 실시간 거리 측정

간단한 4선 배선만으로 ESP32-PICO-KIT에서 HC-SR04 센서를 읽어
Arduino IDE **Serial Plotter**(115 200 bps)에 실시간(cm) 그래프를 띄우는 예제입니다.

---

## 1. 핀 연결

| HC-SR04 핀 | 기능 | ESP32-PICO-KIT 핀 | 메모 |
|------------|------|-------------------|------|
| **Vcc**    | 센서 전원 5 V | **5 V** | USB 5 V 사용 |
| **Trig**   | 초음파 발신 트리거 | **GPIO 5** | 디지털 출력 |
| **Echo**   | 초음파 수신 펄스 | **GPIO 18** | 3.3 V 입력 허용 |
| **GND**    | 공통 GND | **GND** | |

> Echo 출력 전압은 내부 Pull-up 덕분에 약 4 V 이하라 3.3 V 입력 한계 내에서 문제없이 인식됩니다.

---

## 2. 아두이노 스케치

```cpp
#define TRIG_PIN 5
#define ECHO_PIN 18

void setup() {
  Serial.begin(115200);
  pinMode(TRIG_PIN, OUTPUT);
  pinMode(ECHO_PIN, INPUT);
}

void loop() {
  // 트리거 10 µs 펄스
  digitalWrite(TRIG_PIN, LOW);
  delayMicroseconds(2);
  digitalWrite(TRIG_PIN, HIGH);
  delayMicroseconds(10);
  digitalWrite(TRIG_PIN, LOW);

  // Echo 펄스 폭 측정 (타임아웃 25 ms ≈ 4 m)
  unsigned long us = pulseIn(ECHO_PIN, HIGH, 25000UL);
  float cm = us * 0.0343 / 2.0;   // 음속 343 m/s

  if (us == 0) Serial.println("Out of range");
  else         Serial.println(cm);   // Serial Plotter용

  delay(60);   // 약 16 Hz 측정
}
````

---

## 3. 실시간 표시

1. 스케치 업로드 후 **Tools ▸ Serial Plotter**(115 200 bps) 실행
2. 거리(cm)가 그래프로 실시간 표시

   * `Out of range` → 4 m 이상 또는 대상 없음

---

## 4. 확장 아이디어

* **OLED**(SSD1306) : `Serial.println(cm);` 대신 디스플레이 출력
* **BLE Notify** : 거리값을 BLE 특성으로 브로드캐스트
* **LED 바 / 부저** : 거리 구간에 따라 시각·음향 알람

```

::contentReference[oaicite:0]{index=0}
```
